/* Usage:
    var tmi = new TwemojiInput(document.getElementById('twemoji-textarea'));
*/


var TwemojiInput = function(obj){
    /* Declarative Part */

    var Emoji=['ğŸ˜€','ğŸ˜','ğŸ˜‚','ğŸ¤£','ğŸ˜ƒ','ğŸ˜„','ğŸ˜…','ğŸ˜†','ğŸ˜‰','ğŸ˜Š','ğŸ˜‹','ğŸ˜','ğŸ˜','ğŸ˜˜','ğŸ˜—','ğŸ˜™','ğŸ˜š','â˜ºï¸','ğŸ™‚','ğŸ¤—','ğŸ¤©','ğŸ¤”','ğŸ¤¨','ğŸ˜','ğŸ˜‘','ğŸ˜¶','ğŸ™„','ğŸ˜','ğŸ˜£','ğŸ˜¥','ğŸ˜®','ğŸ¤','ğŸ˜¯','ğŸ˜ª','ğŸ˜«','ğŸ˜´','ğŸ˜Œ','ğŸ˜›','ğŸ˜œ','ğŸ˜','ğŸ¤¤','ğŸ˜’','ğŸ˜“','ğŸ˜”','ğŸ˜•','ğŸ™ƒ','ğŸ¤‘','ğŸ˜²','â˜¹ï¸','ğŸ™','ğŸ˜–','ğŸ˜','ğŸ˜Ÿ','ğŸ˜¤','ğŸ˜¢','ğŸ˜­','ğŸ˜¦','ğŸ˜§','ğŸ˜¨','ğŸ˜©','ğŸ¤¯','ğŸ˜¬','ğŸ˜°','ğŸ˜±','ğŸ˜³','ğŸ¤ª','ğŸ˜µ','ğŸ˜¡','ğŸ˜ ','ğŸ¤¬','ğŸ˜·','ğŸ¤’','ğŸ¤•','ğŸ¤¢','ğŸ¤®','ğŸ¤§','ğŸ˜‡','ğŸ¤ ','ğŸ¤¡','ğŸ¤¥','ğŸ¤«','ğŸ¤­','ğŸ§','ğŸ¤“','ğŸ˜ˆ','ğŸ‘¿','ğŸ‘¹','ğŸ‘º','ğŸ’€','â˜ ï¸','ğŸ‘»','ğŸ‘½','ğŸ‘¾','ğŸ¤–','ğŸ’©','ğŸ˜º','ğŸ˜¸','ğŸ˜¹','ğŸ˜»','ğŸ˜¼','ğŸ˜½','ğŸ™€','ğŸ˜¿','ğŸ˜¾','ğŸ™ˆ','ğŸ™‰','ğŸ™Š','ğŸ‘¶','ğŸ§’','ğŸ‘¦','ğŸ‘§','ğŸ§‘','ğŸ‘¨','ğŸ‘©','ğŸ§“','ğŸ‘´','ğŸ‘µ','ğŸ‘¨â€âš•ï¸','ğŸ‘©â€âš•ï¸','ğŸ‘¨â€ğŸ“','ğŸ‘©â€ğŸ“','ğŸ‘¨â€ğŸ«','ğŸ‘©â€ğŸ«','ğŸ‘¨â€âš–ï¸','ğŸ‘©â€âš–ï¸','ğŸ‘¨â€ğŸŒ¾','ğŸ‘©â€ğŸŒ¾','ğŸ‘¨â€ğŸ³','ğŸ‘©â€ğŸ³','ğŸ‘¨â€ğŸ”§','ğŸ‘©â€ğŸ”§','ğŸ‘¨â€ğŸ­','ğŸ‘©â€ğŸ­','ğŸ‘¨â€ğŸ’¼','ğŸ‘©â€ğŸ’¼','ğŸ‘¨â€ğŸ”¬','ğŸ‘©â€ğŸ”¬','ğŸ‘¨â€ğŸ’»','ğŸ‘©â€ğŸ’»','ğŸ‘¨â€ğŸ¤','ğŸ‘©â€ğŸ¤','ğŸ‘¨â€ğŸ¨','ğŸ‘©â€ğŸ¨','ğŸ‘¨â€âœˆï¸','ğŸ‘©â€âœˆï¸','ğŸ‘¨â€ğŸš€','ğŸ‘©â€ğŸš€','ğŸ‘¨â€ğŸš’','ğŸ‘©â€ğŸš’','ğŸ‘®','ğŸ‘®â€â™‚ï¸','ğŸ‘®â€â™€ï¸','ğŸ•µï¸','ğŸ•µï¸â€â™‚ï¸','ğŸ•µï¸â€â™€ï¸','ğŸ’‚','ğŸ’‚â€â™‚ï¸','ğŸ’‚â€â™€ï¸','ğŸ‘·','ğŸ‘·â€â™‚ï¸','ğŸ‘·â€â™€ï¸','ğŸ¤´','ğŸ‘¸','ğŸ‘³','ğŸ‘³â€â™‚ï¸','ğŸ‘³â€â™€ï¸','ğŸ‘²','ğŸ§•','ğŸ§”','ğŸ‘±','ğŸ‘±â€â™‚ï¸','ğŸ‘±â€â™€ï¸','ğŸ¤µ','ğŸ‘°','ğŸ¤°','ğŸ¤±','ğŸ‘¼','ğŸ…','ğŸ¤¶','ğŸ§™','ğŸ§™â€â™€ï¸','ğŸ§™â€â™‚ï¸','ğŸ§š','ğŸ§šâ€â™€ï¸','ğŸ§šâ€â™‚ï¸','ğŸ§›','ğŸ§›â€â™€ï¸','ğŸ§›â€â™‚ï¸','ğŸ§œ','ğŸ§œâ€â™€ï¸','ğŸ§œâ€â™‚ï¸','ğŸ§','ğŸ§â€â™€ï¸','ğŸ§â€â™‚ï¸','ğŸ§','ğŸ§â€â™€ï¸','ğŸ§â€â™‚ï¸','ğŸ§Ÿ','ğŸ§Ÿâ€â™€ï¸','ğŸ§Ÿâ€â™‚ï¸','ğŸ™','ğŸ™â€â™‚ï¸','ğŸ™â€â™€ï¸','ğŸ™','ğŸ™â€â™‚ï¸','ğŸ™â€â™€ï¸','ğŸ™…','ğŸ™…â€â™‚ï¸','ğŸ™…â€â™€ï¸','ğŸ™†','ğŸ™†â€â™‚ï¸','ğŸ™†â€â™€ï¸','ğŸ’','ğŸ’â€â™‚ï¸','ğŸ’â€â™€ï¸','ğŸ™‹','ğŸ™‹â€â™‚ï¸','ğŸ™‹â€â™€ï¸','ğŸ™‡','ğŸ™‡â€â™‚ï¸','ğŸ™‡â€â™€ï¸','ğŸ¤¦','ğŸ¤¦â€â™‚ï¸','ğŸ¤¦â€â™€ï¸','ğŸ¤·','ğŸ¤·â€â™‚ï¸','ğŸ¤·â€â™€ï¸','ğŸ’†','ğŸ’†â€â™‚ï¸','ğŸ’†â€â™€ï¸','ğŸ’‡','ğŸ’‡â€â™‚ï¸','ğŸ’‡â€â™€ï¸','ğŸš¶','ğŸš¶â€â™‚ï¸','ğŸš¶â€â™€ï¸','ğŸƒ','ğŸƒâ€â™‚ï¸','ğŸƒâ€â™€ï¸','ğŸ’ƒ','ğŸ•º','ğŸ‘¯','ğŸ‘¯â€â™‚ï¸','ğŸ‘¯â€â™€ï¸','ğŸ§–','ğŸ§–â€â™€ï¸','ğŸ§–â€â™‚ï¸','ğŸ§—','ğŸ§—â€â™€ï¸','ğŸ§—â€â™‚ï¸','ğŸ§˜','ğŸ§˜â€â™€ï¸','ğŸ§˜â€â™‚ï¸','ğŸ›€','ğŸ›Œ','ğŸ•´ï¸','ğŸ—£ï¸','ğŸ‘¤','ğŸ‘¥','ğŸ¤º','ğŸ‡','â›·ï¸','ğŸ‚','ğŸŒï¸','ğŸŒï¸â€â™‚ï¸','ğŸŒï¸â€â™€ï¸','ğŸ„','ğŸ„â€â™‚ï¸','ğŸ„â€â™€ï¸','ğŸš£','ğŸš£â€â™‚ï¸','ğŸš£â€â™€ï¸','ğŸŠ','ğŸŠâ€â™‚ï¸','ğŸŠâ€â™€ï¸','â›¹ï¸','â›¹ï¸â€â™‚ï¸','â›¹ï¸â€â™€ï¸','ğŸ‹ï¸','ğŸ‹ï¸â€â™‚ï¸','ğŸ‹ï¸â€â™€ï¸','ğŸš´','ğŸš´â€â™‚ï¸','ğŸš´â€â™€ï¸','ğŸšµ','ğŸšµâ€â™‚ï¸','ğŸšµâ€â™€ï¸','ğŸï¸','ğŸï¸','ğŸ¤¸','ğŸ¤¸â€â™‚ï¸','ğŸ¤¸â€â™€ï¸','ğŸ¤¼','ğŸ¤¼â€â™‚ï¸','ğŸ¤¼â€â™€ï¸','ğŸ¤½','ğŸ¤½â€â™‚ï¸','ğŸ¤½â€â™€ï¸','ğŸ¤¾','ğŸ¤¾â€â™‚ï¸','ğŸ¤¾â€â™€ï¸','ğŸ¤¹','ğŸ¤¹â€â™‚ï¸','ğŸ¤¹â€â™€ï¸','ğŸ‘«','ğŸ‘¬','ğŸ‘­','ğŸ’','ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨','ğŸ‘¨â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨','ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘©','ğŸ’‘','ğŸ‘©â€â¤ï¸â€ğŸ‘¨','ğŸ‘¨â€â¤ï¸â€ğŸ‘¨','ğŸ‘©â€â¤ï¸â€ğŸ‘©','ğŸ‘ª','ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦','ğŸ‘¨â€ğŸ‘©â€ğŸ‘§','ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦','ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦','ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§','ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦','ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§','ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦','ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦','ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§','ğŸ‘©â€ğŸ‘©â€ğŸ‘¦','ğŸ‘©â€ğŸ‘©â€ğŸ‘§','ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦','ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦','ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§','ğŸ‘¨â€ğŸ‘¦','ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦','ğŸ‘¨â€ğŸ‘§','ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦','ğŸ‘¨â€ğŸ‘§â€ğŸ‘§','ğŸ‘©â€ğŸ‘¦','ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦','ğŸ‘©â€ğŸ‘§','ğŸ‘©â€ğŸ‘§â€ğŸ‘¦','ğŸ‘©â€ğŸ‘§â€ğŸ‘§','ğŸ¤³','ğŸ’ª','ğŸ‘ˆ','ğŸ‘‰','â˜ï¸','ğŸ‘†','ğŸ–•','ğŸ‘‡','âœŒï¸','ğŸ¤','ğŸ––','ğŸ¤˜','ğŸ¤™','ğŸ–ï¸','âœ‹','ğŸ‘Œ','ğŸ‘','ğŸ‘','âœŠ','ğŸ‘Š','ğŸ¤›','ğŸ¤œ','ğŸ¤š','ğŸ‘‹','ğŸ¤Ÿ','âœï¸','ğŸ‘','ğŸ‘','ğŸ™Œ','ğŸ¤²','ğŸ™','ğŸ¤','ğŸ’…','ğŸ‘‚','ğŸ‘ƒ','ğŸ‘£','ğŸ‘€','ğŸ‘ï¸','ğŸ§ ','ğŸ‘…','ğŸ‘„','ğŸ’‹','ğŸ’˜','â¤ï¸','ğŸ’“','ğŸ’”','ğŸ’•','ğŸ’–','ğŸ’—','ğŸ’™','ğŸ’š','ğŸ’›','ğŸ§¡','ğŸ’œ','ğŸ–¤','ğŸ’','ğŸ’','ğŸ’Ÿ','â£ï¸','ğŸ’Œ','ğŸ’¤','ğŸ’¢','ğŸ’£','ğŸ’¥','ğŸ’¦','ğŸ’¨','ğŸ’«','ğŸ’¬','ğŸ—¨ï¸','ğŸ—¯ï¸','ğŸ’­','ğŸ•³ï¸','ğŸ‘“','ğŸ•¶ï¸','ğŸ‘”','ğŸ‘•','ğŸ‘–','ğŸ§£','ğŸ§¤','ğŸ§¥','ğŸ§¦','ğŸ‘—','ğŸ‘˜','ğŸ‘™','ğŸ‘š','ğŸ‘›','ğŸ‘œ','ğŸ‘','ğŸ›ï¸','ğŸ’','ğŸ‘','ğŸ‘Ÿ','ğŸ‘ ','ğŸ‘¡','ğŸ‘¢','ğŸ‘‘','ğŸ‘’','ğŸ©','ğŸ“','ğŸ§¢','â›‘ï¸','ğŸ“¿','ğŸ’„','ğŸ’','ğŸ’','ğŸµ','ğŸ’','ğŸ¦','ğŸ¶','ğŸ•','ğŸ©','ğŸº','ğŸ¦Š','ğŸ±','ğŸˆ','ğŸ¦','ğŸ¯','ğŸ…','ğŸ†','ğŸ´','ğŸ','ğŸ¦„','ğŸ¦“','ğŸ¦Œ','ğŸ®','ğŸ‚','ğŸƒ','ğŸ„','ğŸ·','ğŸ–','ğŸ—','ğŸ½','ğŸ','ğŸ‘','ğŸ','ğŸª','ğŸ«','ğŸ¦’','ğŸ˜','ğŸ¦','ğŸ­','ğŸ','ğŸ€','ğŸ¹','ğŸ°','ğŸ‡','ğŸ¿ï¸','ğŸ¦”','ğŸ¦‡','ğŸ»','ğŸ¨','ğŸ¼','ğŸ¾','ğŸ¦ƒ','ğŸ”','ğŸ“','ğŸ£','ğŸ¤','ğŸ¥','ğŸ¦','ğŸ§','ğŸ•Šï¸','ğŸ¦…','ğŸ¦†','ğŸ¦‰','ğŸ¸','ğŸŠ','ğŸ¢','ğŸ¦','ğŸ','ğŸ²','ğŸ‰','ğŸ¦•','ğŸ¦–','ğŸ³','ğŸ‹','ğŸ¬','ğŸŸ','ğŸ ','ğŸ¡','ğŸ¦ˆ','ğŸ™','ğŸš','ğŸ¦€','ğŸ¦','ğŸ¦‘','ğŸŒ','ğŸ¦‹','ğŸ›','ğŸœ','ğŸ','ğŸ','ğŸ¦—','ğŸ•·ï¸','ğŸ•¸ï¸','ğŸ¦‚','ğŸ’','ğŸŒ¸','ğŸ’®','ğŸµï¸','ğŸŒ¹','ğŸ¥€','ğŸŒº','ğŸŒ»','ğŸŒ¼','ğŸŒ·','ğŸŒ±','ğŸŒ²','ğŸŒ³','ğŸŒ´','ğŸŒµ','ğŸŒ¾','ğŸŒ¿','â˜˜ï¸','ğŸ€','ğŸ','ğŸ‚','ğŸƒ','ğŸ‡','ğŸˆ','ğŸ‰','ğŸŠ','ğŸ‹','ğŸŒ','ğŸ','ğŸ','ğŸ','ğŸ','ğŸ‘','ğŸ’','ğŸ“','ğŸ¥','ğŸ…','ğŸ¥¥','ğŸ¥‘','ğŸ†','ğŸ¥”','ğŸ¥•','ğŸŒ½','ğŸŒ¶ï¸','ğŸ¥’','ğŸ¥¦','ğŸ„','ğŸ¥œ','ğŸŒ°','ğŸ','ğŸ¥','ğŸ¥–','ğŸ¥¨','ğŸ¥','ğŸ§€','ğŸ–','ğŸ—','ğŸ¥©','ğŸ¥“','ğŸ”','ğŸŸ','ğŸ•','ğŸŒ­','ğŸ¥ª','ğŸŒ®','ğŸŒ¯','ğŸ¥™','ğŸ¥š','ğŸ³','ğŸ¥˜','ğŸ²','ğŸ¥£','ğŸ¥—','ğŸ¿','ğŸ¥«','ğŸ±','ğŸ˜','ğŸ™','ğŸš','ğŸ›','ğŸœ','ğŸ','ğŸ ','ğŸ¢','ğŸ£','ğŸ¤','ğŸ¥','ğŸ¡','ğŸ¥Ÿ','ğŸ¥ ','ğŸ¥¡','ğŸ¦','ğŸ§','ğŸ¨','ğŸ©','ğŸª','ğŸ‚','ğŸ°','ğŸ¥§','ğŸ«','ğŸ¬','ğŸ­','ğŸ®','ğŸ¯','ğŸ¼','ğŸ¥›','â˜•','ğŸµ','ğŸ¶','ğŸ¾','ğŸ·','ğŸ¸','ğŸ¹','ğŸº','ğŸ»','ğŸ¥‚','ğŸ¥ƒ','ğŸ¥¤','ğŸ¥¢','ğŸ½ï¸','ğŸ´','ğŸ¥„','ğŸ”ª','ğŸº','ğŸƒ','ğŸ„','ğŸ†','ğŸ‡','âœ¨','ğŸˆ','ğŸ‰','ğŸŠ','ğŸ‹','ğŸ','ğŸ','ğŸ','ğŸ','ğŸ‘','ğŸ€','ğŸ','ğŸ—ï¸','ğŸŸï¸','ğŸ«','ğŸ–ï¸','ğŸ†','ğŸ…','ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰','âš½','âš¾','ğŸ€','ğŸ','ğŸˆ','ğŸ‰','ğŸ¾','ğŸ±','ğŸ³','ğŸ','ğŸ‘','ğŸ’','ğŸ“','ğŸ¸','ğŸ¥Š','ğŸ¥‹','ğŸ¥…','ğŸ¯','â›³','â›¸ï¸','ğŸ£','ğŸ½','ğŸ¿','ğŸ›·','ğŸ¥Œ','ğŸ®','ğŸ•¹ï¸','ğŸ²','â™ ï¸','â™¥ï¸','â™¦ï¸','â™£ï¸','ğŸƒ','ğŸ€„','ğŸ´','ğŸŒ','ğŸŒ','ğŸŒ','ğŸŒ','ğŸ—ºï¸','ğŸ—¾','ğŸ”ï¸','â›°ï¸','ğŸŒ‹','ğŸ—»','ğŸ•ï¸','ğŸ–ï¸','ğŸœï¸','ğŸï¸','ğŸï¸','ğŸŸï¸','ğŸ›ï¸','ğŸ—ï¸','ğŸ˜ï¸','ğŸ™ï¸','ğŸšï¸','ğŸ ','ğŸ¡','ğŸ¢','ğŸ£','ğŸ¤','ğŸ¥','ğŸ¦','ğŸ¨','ğŸ©','ğŸª','ğŸ«','ğŸ¬','ğŸ­','ğŸ¯','ğŸ°','ğŸ’’','ğŸ—¼','ğŸ—½','â›ª','ğŸ•Œ','ğŸ•','â›©ï¸','ğŸ•‹','â›²','â›º','ğŸŒ','ğŸŒƒ','ğŸŒ„','ğŸŒ…','ğŸŒ†','ğŸŒ‡','ğŸŒ‰','â™¨ï¸','ğŸŒŒ','ğŸ ','ğŸ¡','ğŸ¢','ğŸ’ˆ','ğŸª','ğŸ­','ğŸ–¼ï¸','ğŸ¨','ğŸ°','ğŸš‚','ğŸšƒ','ğŸš„','ğŸš…','ğŸš†','ğŸš‡','ğŸšˆ','ğŸš‰','ğŸšŠ','ğŸš','ğŸš','ğŸš‹','ğŸšŒ','ğŸš','ğŸš','ğŸš','ğŸš‘','ğŸš’','ğŸš“','ğŸš”','ğŸš•','ğŸš–','ğŸš—','ğŸš˜','ğŸš™','ğŸšš','ğŸš›','ğŸšœ','ğŸš²','ğŸ›´','ğŸ›µ','ğŸš','ğŸ›£ï¸','ğŸ›¤ï¸','â›½','ğŸš¨','ğŸš¥','ğŸš¦','ğŸš§','ğŸ›‘','âš“','â›µ','ğŸ›¶','ğŸš¤','ğŸ›³ï¸','â›´ï¸','ğŸ›¥ï¸','ğŸš¢','âœˆï¸','ğŸ›©ï¸','ğŸ›«','ğŸ›¬','ğŸ’º','ğŸš','ğŸšŸ','ğŸš ','ğŸš¡','ğŸ›°ï¸','ğŸš€','ğŸ›¸','ğŸ›ï¸','ğŸšª','ğŸ›ï¸','ğŸ›‹ï¸','ğŸš½','ğŸš¿','ğŸ›','âŒ›','â³','âŒš','â°','â±ï¸','â²ï¸','ğŸ•°ï¸','ğŸ•›','ğŸ•§','ğŸ•','ğŸ•œ','ğŸ•‘','ğŸ•','ğŸ•’','ğŸ•','ğŸ•“','ğŸ•Ÿ','ğŸ•”','ğŸ• ','ğŸ••','ğŸ•¡','ğŸ•–','ğŸ•¢','ğŸ•—','ğŸ•£','ğŸ•˜','ğŸ•¤','ğŸ•™','ğŸ•¥','ğŸ•š','ğŸ•¦','ğŸŒ‘','ğŸŒ’','ğŸŒ“','ğŸŒ”','ğŸŒ•','ğŸŒ–','ğŸŒ—','ğŸŒ˜','ğŸŒ™','ğŸŒš','ğŸŒ›','ğŸŒœ','ğŸŒ¡ï¸','â˜€ï¸','ğŸŒ','ğŸŒ','â­','ğŸŒŸ','ğŸŒ ','â˜ï¸','â›…','â›ˆï¸','ğŸŒ¤ï¸','ğŸŒ¥ï¸','ğŸŒ¦ï¸','ğŸŒ§ï¸','ğŸŒ¨ï¸','ğŸŒ©ï¸','ğŸŒªï¸','ğŸŒ«ï¸','ğŸŒ¬ï¸','ğŸŒ€','ğŸŒˆ','ğŸŒ‚','â˜‚ï¸','â˜”','â›±ï¸','âš¡','â„ï¸','â˜ƒï¸','â›„','â˜„ï¸','ğŸ”¥','ğŸ’§','ğŸŒŠ','ğŸ”‡','ğŸ”ˆ','ğŸ”‰','ğŸ”Š','ğŸ“¢','ğŸ“£','ğŸ“¯','ğŸ””','ğŸ”•','ğŸ¼','ğŸµ','ğŸ¶','ğŸ™ï¸','ğŸšï¸','ğŸ›ï¸','ğŸ¤','ğŸ§','ğŸ“»','ğŸ·','ğŸ¸','ğŸ¹','ğŸº','ğŸ»','ğŸ¥','ğŸ“±','ğŸ“²','â˜ï¸','ğŸ“','ğŸ“Ÿ','ğŸ“ ','ğŸ”‹','ğŸ”Œ','ğŸ’»','ğŸ–¥ï¸','ğŸ–¨ï¸','âŒ¨ï¸','ğŸ–±ï¸','ğŸ–²ï¸','ğŸ’½','ğŸ’¾','ğŸ’¿','ğŸ“€','ğŸ¥','ğŸï¸','ğŸ“½ï¸','ğŸ¬','ğŸ“º','ğŸ“·','ğŸ“¸','ğŸ“¹','ğŸ“¼','ğŸ”','ğŸ”','ğŸ”¬','ğŸ”­','ğŸ“¡','ğŸ•¯ï¸','ğŸ’¡','ğŸ”¦','ğŸ®','ğŸ“”','ğŸ“•','ğŸ“–','ğŸ“—','ğŸ“˜','ğŸ“™','ğŸ“š','ğŸ““','ğŸ“’','ğŸ“ƒ','ğŸ“œ','ğŸ“„','ğŸ“°','ğŸ—ï¸','ğŸ“‘','ğŸ”–','ğŸ·ï¸','ğŸ’°','ğŸ’´','ğŸ’µ','ğŸ’¶','ğŸ’·','ğŸ’¸','ğŸ’³','ğŸ’¹','ğŸ’±','ğŸ’²','âœ‰ï¸','ğŸ“§','ğŸ“¨','ğŸ“©','ğŸ“¤','ğŸ“¥','ğŸ“¦','ğŸ“«','ğŸ“ª','ğŸ“¬','ğŸ“­','ğŸ“®','ğŸ—³ï¸','âœï¸','âœ’ï¸','ğŸ–‹ï¸','ğŸ–Šï¸','ğŸ–Œï¸','ğŸ–ï¸','ğŸ“','ğŸ’¼','ğŸ“','ğŸ“‚','ğŸ—‚ï¸','ğŸ“…','ğŸ“†','ğŸ—’ï¸','ğŸ—“ï¸','ğŸ“‡','ğŸ“ˆ','ğŸ“‰','ğŸ“Š','ğŸ“‹','ğŸ“Œ','ğŸ“','ğŸ“','ğŸ–‡ï¸','ğŸ“','ğŸ“','âœ‚ï¸','ğŸ—ƒï¸','ğŸ—„ï¸','ğŸ—‘ï¸','ğŸ”’','ğŸ”“','ğŸ”','ğŸ”','ğŸ”‘','ğŸ—ï¸','ğŸ”¨','â›ï¸','âš’ï¸','ğŸ› ï¸','ğŸ—¡ï¸','âš”ï¸','ğŸ”«','ğŸ¹','ğŸ›¡ï¸','ğŸ”§','ğŸ”©','âš™ï¸','ğŸ—œï¸','âš—ï¸','âš–ï¸','ğŸ”—','â›“ï¸','ğŸ’‰','ğŸ’Š','ğŸš¬','âš°ï¸','âš±ï¸','ğŸ—¿','ğŸ›¢ï¸','ğŸ”®','ğŸ›’','ğŸ§','ğŸš®','ğŸš°','â™¿','ğŸš¹','ğŸšº','ğŸš»','ğŸš¼','ğŸš¾','ğŸ›‚','ğŸ›ƒ','ğŸ›„','ğŸ›…','âš ï¸','ğŸš¸','â›”','ğŸš«','ğŸš³','ğŸš­','ğŸš¯','ğŸš±','ğŸš·','ğŸ“µ','ğŸ”','â˜¢ï¸','â˜£ï¸','â¬†ï¸','â†—ï¸','â¡ï¸','â†˜ï¸','â¬‡ï¸','â†™ï¸','â¬…ï¸','â†–ï¸','â†•ï¸','â†”ï¸','â†©ï¸','â†ªï¸','â¤´ï¸','â¤µï¸','ğŸ”ƒ','ğŸ”„','ğŸ”™','ğŸ”š','ğŸ”›','ğŸ”œ','ğŸ”','ğŸ›','âš›ï¸','ğŸ•‰ï¸','âœ¡ï¸','â˜¸ï¸','â˜¯ï¸','âœï¸','â˜¦ï¸','â˜ªï¸','â˜®ï¸','ğŸ•','ğŸ”¯','â™ˆ','â™‰','â™Š','â™‹','â™Œ','â™','â™','â™','â™','â™‘','â™’','â™“','â›','ğŸ”€','ğŸ”','ğŸ”‚','â–¶ï¸','â©','â­ï¸','â¯ï¸','â—€ï¸','âª','â®ï¸','ğŸ”¼','â«','ğŸ”½','â¬','â¸ï¸','â¹ï¸','âºï¸','âï¸','ğŸ¦','ğŸ”…','ğŸ”†','ğŸ“¶','ğŸ“³','ğŸ“´','â™€ï¸','â™‚ï¸','âš•ï¸','â™»ï¸','âšœï¸','ğŸ”±','ğŸ“›','ğŸ”°','â­•','âœ…','â˜‘ï¸','âœ”ï¸','âœ–ï¸','âŒ','â','â•','â–','â—','â°','â¿','ã€½ï¸','âœ³ï¸','âœ´ï¸','â‡ï¸','â€¼ï¸','â‰ï¸','â“','â”','â•','â—','ã€°ï¸','â„¢ï¸','#ï¸âƒ£','*ï¸âƒ£','0ï¸âƒ£','1ï¸âƒ£','2ï¸âƒ£','3ï¸âƒ£','4ï¸âƒ£','5ï¸âƒ£','6ï¸âƒ£','7ï¸âƒ£','8ï¸âƒ£','9ï¸âƒ£','ğŸ”Ÿ','ğŸ’¯','ğŸ” ','ğŸ”¡','ğŸ”¢','ğŸ”£','ğŸ”¤','ğŸ…°ï¸','ğŸ†','ğŸ…±ï¸','ğŸ†‘','ğŸ†’','ğŸ†“','â„¹ï¸','ğŸ†”','â“‚ï¸','ğŸ†•','ğŸ†–','ğŸ…¾ï¸','ğŸ†—','ğŸ…¿ï¸','ğŸ†˜','ğŸ†™','ğŸ†š','ğŸˆ','ğŸˆ‚ï¸','ğŸˆ·ï¸','ğŸˆ¶','ğŸˆ¯','ğŸ‰','ğŸˆ¹','ğŸˆš','ğŸˆ²','ğŸ‰‘','ğŸˆ¸','ğŸˆ´','ğŸˆ³','ãŠ—ï¸','ãŠ™ï¸','ğŸˆº','ğŸˆµ','â–ªï¸','â–«ï¸','â—»ï¸','â—¼ï¸','â—½','â—¾','â¬›','â¬œ','ğŸ”¶','ğŸ”·','ğŸ”¸','ğŸ”¹','ğŸ”º','ğŸ”»','ğŸ’ ','ğŸ”˜','ğŸ”²','ğŸ”³','âšª','âš«','ğŸ”´','ğŸ”µ','ğŸ','ğŸ‡¨ğŸ‡³','ğŸŒ','ğŸ‡©ğŸ‡ª','ğŸ‡ªğŸ‡¸','ğŸ‡¦ğŸ‡¨','ğŸ‡¦ğŸ‡©','ğŸ‡¦ğŸ‡ª','ğŸ‡¦ğŸ‡«','ğŸ‡¦ğŸ‡¬','ğŸ‡¦ğŸ‡®','ğŸ‡¦ğŸ‡±','ğŸ‡¦ğŸ‡²','ğŸ‡¦ğŸ‡´','ğŸ‡¦ğŸ‡¶','ğŸ‡¦ğŸ‡·','ğŸ‡¦ğŸ‡¸','ğŸ‡¦ğŸ‡¹','ğŸ‡¦ğŸ‡º','ğŸ‡¦ğŸ‡¼','ğŸ‡¦ğŸ‡½','ğŸ‡¦ğŸ‡¿','ğŸ‡§ğŸ‡¦','ğŸ‡§ğŸ‡§','ğŸ‡§ğŸ‡©','ğŸ‡§ğŸ‡ª','ğŸ‡§ğŸ‡«','ğŸ‡§ğŸ‡¬','ğŸ‡§ğŸ‡­','ğŸ‡§ğŸ‡®','ğŸ‡§ğŸ‡¯','ğŸ‡§ğŸ‡±','ğŸ‡§ğŸ‡²','ğŸ‡§ğŸ‡³','ğŸ‡§ğŸ‡´','ğŸ‡§ğŸ‡¶','ğŸ‡§ğŸ‡·','ğŸ‡§ğŸ‡¸','ğŸ‡§ğŸ‡¹','ğŸ‡§ğŸ‡»','ğŸ‡§ğŸ‡¼','ğŸ‡§ğŸ‡¾','ğŸ‡§ğŸ‡¿','ğŸ‡¨ğŸ‡¦','ğŸ‡¨ğŸ‡¨','ğŸ‡¨ğŸ‡©','ğŸ‡¨ğŸ‡«','ğŸ‡¨ğŸ‡¬','ğŸ‡¨ğŸ‡­','ğŸ‡¨ğŸ‡®','ğŸ‡¨ğŸ‡°','ğŸ‡¨ğŸ‡±','ğŸ‡¨ğŸ‡²','ğŸ‡¨ğŸ‡´','ğŸ‡¨ğŸ‡µ','ğŸ‡¨ğŸ‡·','ğŸ‡¨ğŸ‡º','ğŸ‡¨ğŸ‡»','ğŸ‡¨ğŸ‡¼','ğŸ‡¨ğŸ‡½','ğŸ‡¨ğŸ‡¾','ğŸ‡¨ğŸ‡¿','ğŸ‡©ğŸ‡¬','ğŸ‡©ğŸ‡¯','ğŸ‡©ğŸ‡°','ğŸ‡©ğŸ‡²','ğŸ‡©ğŸ‡´','ğŸ‡©ğŸ‡¿','ğŸ‡ªğŸ‡¦','ğŸ‡ªğŸ‡¨','ğŸ‡ªğŸ‡ª','ğŸ‡ªğŸ‡¬','ğŸ‡ªğŸ‡­','ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿','ğŸ‡ªğŸ‡·','ğŸ‡ªğŸ‡¹','ğŸ‡ªğŸ‡º','ğŸ‡«ğŸ‡®','ğŸ‡«ğŸ‡¯','ğŸ‡«ğŸ‡°','ğŸ‡«ğŸ‡²','ğŸ‡«ğŸ‡´','ğŸ‡¬ğŸ‡¦','ğŸ‡¬ğŸ‡©','ğŸ‡¬ğŸ‡ª','ğŸ‡¬ğŸ‡«','ğŸ‡¬ğŸ‡¬','ğŸ‡¬ğŸ‡­','ğŸ‡¬ğŸ‡®','ğŸ‡¬ğŸ‡±','ğŸ‡¬ğŸ‡²','ğŸ‡¬ğŸ‡³','ğŸ‡¬ğŸ‡µ','ğŸ‡¬ğŸ‡¶','ğŸ‡¬ğŸ‡·','ğŸ‡¬ğŸ‡¸','ğŸ‡¬ğŸ‡¹','ğŸ‡¬ğŸ‡º','ğŸ‡¬ğŸ‡¼','ğŸ‡¬ğŸ‡¾','ğŸ‡­ğŸ‡°','ğŸ‡­ğŸ‡²','ğŸ‡­ğŸ‡³','ğŸ‡­ğŸ‡·','ğŸ‡­ğŸ‡¹','ğŸ‡­ğŸ‡º','ğŸ‡®ğŸ‡¨','ğŸ‡®ğŸ‡©','ğŸ‡®ğŸ‡ª','ğŸ‡®ğŸ‡±','ğŸ‡®ğŸ‡²','ğŸ‡®ğŸ‡³','ğŸ‡®ğŸ‡´','ğŸ‡®ğŸ‡¶','ğŸ‡®ğŸ‡·','ğŸ‡®ğŸ‡¸','ğŸ‡¯ğŸ‡ª','ğŸ‡¯ğŸ‡²','ğŸ‡¯ğŸ‡´','ğŸ‡°ğŸ‡ª','ğŸ‡°ğŸ‡¬','ğŸ‡°ğŸ‡­','ğŸ‡°ğŸ‡®','ğŸ‡°ğŸ‡²','ğŸ‡°ğŸ‡³','ğŸ‡°ğŸ‡µ','ğŸ‡°ğŸ‡¼','ğŸ‡°ğŸ‡¾','ğŸ‡°ğŸ‡¿','ğŸ‡±ğŸ‡¦','ğŸ‡±ğŸ‡§','ğŸ‡±ğŸ‡¨','ğŸ‡±ğŸ‡®','ğŸ‡±ğŸ‡°','ğŸ‡±ğŸ‡·','ğŸ‡±ğŸ‡¸','ğŸ‡±ğŸ‡¹','ğŸ‡±ğŸ‡º','ğŸ‡±ğŸ‡»','ğŸ‡±ğŸ‡¾','ğŸ‡²ğŸ‡¦','ğŸ‡²ğŸ‡¨','ğŸ‡²ğŸ‡©','ğŸ‡²ğŸ‡ª','ğŸ‡²ğŸ‡«','ğŸ‡²ğŸ‡¬','ğŸ‡²ğŸ‡­','ğŸ‡²ğŸ‡°','ğŸ‡²ğŸ‡±','ğŸ‡²ğŸ‡²','ğŸ‡²ğŸ‡³','ğŸ‡²ğŸ‡´','ğŸ‡²ğŸ‡µ','ğŸ‡²ğŸ‡¶','ğŸ‡²ğŸ‡·','ğŸ‡²ğŸ‡¸','ğŸ‡²ğŸ‡¹','ğŸ‡²ğŸ‡º','ğŸ‡²ğŸ‡»','ğŸ‡²ğŸ‡¼','ğŸ‡²ğŸ‡½','ğŸ‡²ğŸ‡¾','ğŸ‡²ğŸ‡¿','ğŸ‡³ğŸ‡¦','ğŸ‡³ğŸ‡¨','ğŸ‡³ğŸ‡ª','ğŸ‡³ğŸ‡«','ğŸ‡³ğŸ‡¬','ğŸ‡³ğŸ‡®','ğŸ‡³ğŸ‡±','ğŸ‡³ğŸ‡´','ğŸ‡³ğŸ‡µ','ğŸ‡³ğŸ‡·','ğŸ‡³ğŸ‡º','ğŸ‡³ğŸ‡¿','ğŸ‡´ğŸ‡²','ğŸ‡µğŸ‡¦','ğŸ‡µğŸ‡ª','ğŸ‡µğŸ‡«','ğŸ‡µğŸ‡¬','ğŸ‡µğŸ‡­','ğŸ‡µğŸ‡°','ğŸ‡µğŸ‡±','ğŸ‡µğŸ‡²','ğŸ‡µğŸ‡³','ğŸ‡µğŸ‡·','ğŸ‡µğŸ‡¸','ğŸ‡µğŸ‡¹','ğŸ‡µğŸ‡¼','ğŸ‡µğŸ‡¾','ğŸ‡¶ğŸ‡¦','ğŸ‡·ğŸ‡ª','ğŸ‡·ğŸ‡´','ğŸ‡·ğŸ‡¸','ğŸ‡·ğŸ‡¼','ğŸ‡¸ğŸ‡¦','ğŸ‡¸ğŸ‡§','ğŸ‡¸ğŸ‡¨','ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿','ğŸ‡¸ğŸ‡©','ğŸ‡¸ğŸ‡ª','ğŸ‡¸ğŸ‡¬','ğŸ‡¸ğŸ‡­','ğŸ‡¸ğŸ‡®','ğŸ‡¸ğŸ‡¯','ğŸ‡¸ğŸ‡°','ğŸ‡¸ğŸ‡±','ğŸ‡¸ğŸ‡²','ğŸ‡¸ğŸ‡³','ğŸ‡¸ğŸ‡´','ğŸ‡¸ğŸ‡·','ğŸ‡¸ğŸ‡¸','ğŸ‡¸ğŸ‡¹','ğŸ‡¸ğŸ‡»','ğŸ‡¸ğŸ‡½','ğŸ‡¸ğŸ‡¾','ğŸ‡¸ğŸ‡¿','ğŸ‡¹ğŸ‡¦','ğŸ‡¹ğŸ‡¨','ğŸ‡¹ğŸ‡©','ğŸ‡¹ğŸ‡«','ğŸ‡¹ğŸ‡¬','ğŸ‡¹ğŸ‡­','ğŸ‡¹ğŸ‡¯','ğŸ‡¹ğŸ‡°','ğŸ‡¹ğŸ‡±','ğŸ‡¹ğŸ‡²','ğŸ‡¹ğŸ‡³','ğŸ‡¹ğŸ‡´','ğŸ‡¹ğŸ‡·','ğŸ‡¹ğŸ‡¹','ğŸ‡¹ğŸ‡»','ğŸ‡¹ğŸ‡¼','ğŸ‡¹ğŸ‡¿','ğŸ‡ºğŸ‡¦','ğŸ‡ºğŸ‡¬','ğŸ‡ºğŸ‡²','ğŸ‡ºğŸ‡¾','ğŸ‡ºğŸ‡¿','ğŸ‡»ğŸ‡¦','ğŸ‡»ğŸ‡¨','ğŸ‡»ğŸ‡ª','ğŸ‡»ğŸ‡¬','ğŸ‡»ğŸ‡®','ğŸ‡»ğŸ‡³','ğŸ‡»ğŸ‡º','ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿','ğŸ‡¼ğŸ‡«','ğŸ‡¼ğŸ‡¸','ğŸ‡½ğŸ‡°','ğŸ‡¾ğŸ‡ª','ğŸ‡¾ğŸ‡¹','ğŸ‡¿ğŸ‡¦','ğŸ‡¿ğŸ‡²','ğŸ‡¿ğŸ‡¼','ğŸ‡«ğŸ‡·','ğŸ‡¬ğŸ‡§','ğŸ‡®ğŸ‡¹','ğŸ‡¯ğŸ‡µ','ğŸ‡°ğŸ‡·','ğŸ³ï¸â€ğŸŒˆ','ğŸ‡·ğŸ‡º','ğŸš©','ğŸ‡ºğŸ‡¸','ğŸ´','ğŸ³ï¸'],

        prefix = '_twemoji',
        size = 32,
        saveAsImg = false,

        list = document.createElement('ul'),
        listWrap = document.createElement('div'),
        popover = document.createElement('div'),
        wrapper = document.createElement('div'),
        customTextarea = document.createElement('iframe'),
        box = document.createElement('div'),
        lastCaretPostion = 0;

    /* Contenteditable iframe with simple API. You can access it with TwemojiInput.Editor */

    var Editor = function(){
      var t = this;

      t.init();
    };

    Editor.prototype.addStyles = function(){
      var t = this;

      t.styles = document.createElement('style');
      t.styles.setAttribute('type', 'text/css');
      t.styles.innerText = 'body{line-height: 18px;} img.emoji{height: 14px; width: 14px;}';

      t.content.head.appendChild(t.styles);
    };

    Editor.prototype.focus = function(){
      var t = this;
      t.content.body.focus();
    };

    Editor.prototype.insertImage = function(img){
      var t = this;

      function insert(){
        var id = "rand" + (Math.random() + "").slice(2),
            sel;

        if (t.content.queryCommandSupported("InsertHTML")) {
            t.content.execCommand("insertHTML", false, img);
        } else if ( (sel = t.content.selection) && sel.type != "Control") {
            var range = sel.createRange();
            range.pasteHTML(img);
            range.collapse(false);
            range.select();
        };

        t.updateMirror();

        return t.content.getElementById(id);
      };

      t.focus();

      return insert();
    };

    Editor.prototype.value = function(value){
      var t = this;

      if(value){
        t.content.body.innerHTML = value;
        t.updateMirror();
        return value;
      } else {
        return t.content.body.innerHTML;
      }
    };

    Editor.prototype.updateMirror = function(){
      var t = this,
          value = t.value();

      value = saveAsImg ? value : value.replace(/<img.*?alt=".*?/g,'').replace(/".?src=.*?>/g,'');
      t.mirror.value = value;
    };

    Editor.prototype.listenChanges = function(){
      var t = this;
      ['mouseup','touchend','keyup','blur'].map(function(event){
        t.content.body.addEventListener(event, function(){
          t.updateMirror();
        });
      });
    };

    Editor.prototype.init = function(){
      var t = this;

      t.frame = document.createElement('iframe');
      t.frame.className = prefix + '_textarea';
      t.frame.setAttribute('id','twemoji-textarea');
      t.frame.setAttribute('tabindex','-1');
      t.mirror = obj;

      t.frame.onload = function(){
        t.content = (t.frame.contentDocument || t.frame.document);
        t.content.body.setAttribute('contenteditable','true');

        t.addStyles();
        t.listenChanges();
      };
    };


    /* Descriptional Part */


    function wrap(){
      wrapper.className = prefix + '_wrap';
      box.className = prefix + '_box';
      popover.className = prefix + '_popover';
      listWrap.className = prefix + '_list_wrap';

      customTextarea = new Editor();

      list.style.height = (Emoji.length/5)*size + 'px';

      obj.parentNode.insertBefore(wrapper, obj);

      wrapper.appendChild(obj);
      wrapper.appendChild(customTextarea.frame);
      wrapper.appendChild(box);
      wrapper.appendChild(popover);
      popover.appendChild(listWrap);
      listWrap.appendChild(list);
    };


    function updateList(listSize){
      var l = Emoji.length,
          w = popover.offsetWidth,
          h = popover.offsetHeight,
          listSize = listSize || 25,
          listLength = list.children.length;

      for(var i = listLength; i<listSize; i++){
        function createItem(){
          var listItem = document.createElement('li'),
              parsedTwemoji = twemoji.parse(Emoji[i]);

          list.appendChild(listItem);
          listItem.innerHTML = parsedTwemoji;

          listItem.onclick = function(e){
              var alt = this.children[0].attributes['alt'].value;

              customTextarea.insertImage(twemoji.parse(alt));

              if(!e.ctrlKey){
                toggleBox()
              }
          }
        };

        if(Emoji[i]){
          createItem();
        }
      }

    };


     var customScroll = function(content, options){
       var wrap = document.createElement('div'),
           master = document.createElement('div'),
           slave = document.createElement('div'),
           scrollbar = document.createElement('div'),
           placeholder = document.createElement('div');

       wrap.className = 'scroll_wrap';
       master.className = 'scroll_master';
       slave.className = 'scroll_slave';
       scrollbar.className = 'scroll_bar';
       placeholder.className = 'scroll_placeholder';

       wrap.style.width = options ? options.width+'px' : '195px';
       wrap.style.height = slave.style.height = options ? options.height+'px' : '150px';
       master.style.height = options ? options.height+20+'px' : '170px';
       slave.style.width = options ? options.width +'px' : '195px';

       content.parentNode.insertBefore(wrap, content);
       wrap.appendChild(slave);
       wrap.appendChild(master);
       wrap.appendChild(scrollbar);
       slave.appendChild(content);
       master.appendChild(placeholder);

       scrollbar.style.height = (wrap.scrollHeight-30)*(wrap.scrollHeight/slave.scrollHeight)+'px';
       placeholder.style.height = (Emoji.length/5)*size+50 + 'px';//embarrassing hack

       function moveScroll(){
           var top = (wrap.scrollHeight-38)*(master.scrollTop/master.scrollHeight);
           scrollbar.style.top = top+'px';
       };

       master.onscroll = function(e){
           moveScroll();
           slave.scrollTop = master.scrollTop;
           options.onscroll(master.scrollTop);
       };

       slave.onscroll = function(){
           master.scrollTop = slave.scrollTop;
           options.onscroll(slave.scrollTop);
       };

   };

   function init(){
      var scrollList;

      wrap();
      updateList();
      customTextarea.value(twemoji.parse(obj.value));

      scrollList = new customScroll(list, {
            width: 185,
            height: 150,
            onscroll: function(scrollTop){    //Render emoji only when it needs
              var listSize = (parseInt(scrollTop/size)*5)+25;//5 rows and 5 cols = 25 items
              updateList(listSize);
            }
          });
    };



    /* Application Part */

    function toggleBox(){
      var currentClass = wrapper.className;
      if(currentClass.match('__open','g')){
        wrapper.className = currentClass.replace(/ __open/g,'')
      } else {
         wrapper.className += ' __open';
      }
    }

    box.onclick = function(e){
      e.preventDefault();
      toggleBox();
    };

    document.onclick = function(e){
      if(e.target != box && e.target != wrap && e.target != list && !e.ctrlKey){
        wrapper.className = wrapper.className.replace(/ __open/g,'');
      }
    };

    init();

    return {
      Editor: customTextarea
    };
};